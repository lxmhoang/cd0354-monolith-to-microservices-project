worker_processes 1;  
events { worker_connections 1024; }
error_log /dev/stdout debug;
http {
 sendfile on;
 upstream user {
    server a21809e66829141d38e48e007f1ed838-1124641010.us-east-1.elb.amazonaws.com:8080;
 }
 upstream feed {
    server adda6bf1424ff4b90857b2053b81cdda-929711300.us-east-1.elb.amazonaws.com:8080;
 }
 proxy_set_header   Host $host;
 proxy_set_header   X-Real-IP $remote_addr;
 proxy_set_header   X-NginX-Proxy true;
 proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_set_header   X-Forwarded-Host $server_name;    
 server {
    listen 8080;
    location /api/v0/feed {
        proxy_pass          http://feed;
        proxy_http_version 1.1;
        proxy_set_header Connection "";
    }
    location /api/v0/users {
        proxy_pass         http://user;
        proxy_http_version 1.1;
        proxy_set_header Connection "";
    }              
 }
}